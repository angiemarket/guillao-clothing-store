{"ast":null,"code":"import _objectSpread from\"C:/Users/angel/OneDrive/Pictures/Karen Sutton Hair Studio/guillao-clothing-store/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{call as _call}from\"redux-saga/effects\";import{all as _all}from\"redux-saga/effects\";import{put as _put}from\"redux-saga/effects\";import{takeLatest as _takeLatest}from\"redux-saga/effects\";import _regeneratorRuntime from\"C:\\\\Users\\\\angel\\\\OneDrive\\\\Pictures\\\\Karen Sutton Hair Studio\\\\guillao-clothing-store\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";var _marked=/*#__PURE__*/_regeneratorRuntime.mark(getSnapshotFromUserAuth),_marked2=/*#__PURE__*/_regeneratorRuntime.mark(signInWithGoogle),_marked3=/*#__PURE__*/_regeneratorRuntime.mark(signInWithEmail),_marked4=/*#__PURE__*/_regeneratorRuntime.mark(isUserAuthenticated),_marked5=/*#__PURE__*/_regeneratorRuntime.mark(signUp),_marked6=/*#__PURE__*/_regeneratorRuntime.mark(signOut),_marked7=/*#__PURE__*/_regeneratorRuntime.mark(signInAfterSignUp),_marked8=/*#__PURE__*/_regeneratorRuntime.mark(onGoogleSignInStart),_marked9=/*#__PURE__*/_regeneratorRuntime.mark(onCheckUserSession),_marked10=/*#__PURE__*/_regeneratorRuntime.mark(onEmailSignInStart),_marked11=/*#__PURE__*/_regeneratorRuntime.mark(onSignUpStart),_marked12=/*#__PURE__*/_regeneratorRuntime.mark(onSignUpSuccess),_marked13=/*#__PURE__*/_regeneratorRuntime.mark(onSignOutStart),_marked14=/*#__PURE__*/_regeneratorRuntime.mark(userSagas);import{USER_ACTION_TYPES}from'./user.types';import{signInSuccess,signInFailed,signUpSuccess,signUpFailed,signOutSuccess,signOutFailed}from'./user.action';import{getCurrentUser,createUserDocumentFromAuth,signInWithGooglePopup,signInAuthUserWithEmailAndPassword,createAuthUserWithEmailAndPassword,signOutUser}from'../../utils/firebase/firebase.utils';export function getSnapshotFromUserAuth(userAuth,additionalDetails){var userSnapshot;return _regeneratorRuntime.wrap(function getSnapshotFromUserAuth$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return _call(createUserDocumentFromAuth,userAuth,additionalDetails);case 3:userSnapshot=_context.sent;if(!userSnapshot){_context.next=7;break;}_context.next=7;return _put(signInSuccess(_objectSpread({id:userSnapshot.id},userSnapshot.data())));case 7:_context.next=13;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);_context.next=13;return _put(signInFailed(_context.t0));case 13:case\"end\":return _context.stop();}}},_marked,null,[[0,9]]);}export function signInWithGoogle(){var _yield$_call,user;return _regeneratorRuntime.wrap(function signInWithGoogle$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return _call(signInWithGooglePopup);case 3:_yield$_call=_context2.sent;user=_yield$_call.user;_context2.next=7;return _call(getSnapshotFromUserAuth,user);case 7:_context2.next=13;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](0);_context2.next=13;return _put(signInFailed(_context2.t0));case 13:case\"end\":return _context2.stop();}}},_marked2,null,[[0,9]]);}export function signInWithEmail(_ref){var _ref$payload,email,password,userCredential,user;return _regeneratorRuntime.wrap(function signInWithEmail$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_ref$payload=_ref.payload,email=_ref$payload.email,password=_ref$payload.password;_context3.prev=1;_context3.next=4;return _call(signInAuthUserWithEmailAndPassword,email,password);case 4:userCredential=_context3.sent;if(!userCredential){_context3.next=9;break;}user=userCredential.user;_context3.next=9;return _call(getSnapshotFromUserAuth,user);case 9:_context3.next=15;break;case 11:_context3.prev=11;_context3.t0=_context3[\"catch\"](1);_context3.next=15;return _put(signInFailed(_context3.t0));case 15:case\"end\":return _context3.stop();}}},_marked3,null,[[1,11]]);}export function isUserAuthenticated(){var userAuth;return _regeneratorRuntime.wrap(function isUserAuthenticated$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return _call(getCurrentUser);case 3:userAuth=_context4.sent;if(userAuth){_context4.next=6;break;}return _context4.abrupt(\"return\");case 6:_context4.next=8;return _call(getSnapshotFromUserAuth,userAuth);case 8:_context4.next=14;break;case 10:_context4.prev=10;_context4.t0=_context4[\"catch\"](0);_context4.next=14;return _put(signInFailed(_context4.t0));case 14:case\"end\":return _context4.stop();}}},_marked4,null,[[0,10]]);}export function signUp(_ref2){var _ref2$payload,email,password,displayName,userCredential,user;return _regeneratorRuntime.wrap(function signUp$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_ref2$payload=_ref2.payload,email=_ref2$payload.email,password=_ref2$payload.password,displayName=_ref2$payload.displayName;_context5.prev=1;_context5.next=4;return _call(createAuthUserWithEmailAndPassword,email,password);case 4:userCredential=_context5.sent;if(!userCredential){_context5.next=9;break;}user=userCredential.user;_context5.next=9;return _put(signUpSuccess(user,{displayName:displayName}));case 9:_context5.next=15;break;case 11:_context5.prev=11;_context5.t0=_context5[\"catch\"](1);_context5.next=15;return _put(signUpFailed(_context5.t0));case 15:case\"end\":return _context5.stop();}}},_marked5,null,[[1,11]]);}export function signOut(){return _regeneratorRuntime.wrap(function signOut$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.prev=0;_context6.next=3;return _call(signOutUser);case 3:_context6.next=5;return _put(signOutSuccess());case 5:_context6.next=11;break;case 7:_context6.prev=7;_context6.t0=_context6[\"catch\"](0);_context6.next=11;return _put(signOutFailed(_context6.t0));case 11:case\"end\":return _context6.stop();}}},_marked6,null,[[0,7]]);}export function signInAfterSignUp(_ref3){var _ref3$payload,user,additionalDetails;return _regeneratorRuntime.wrap(function signInAfterSignUp$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_ref3$payload=_ref3.payload,user=_ref3$payload.user,additionalDetails=_ref3$payload.additionalDetails;_context7.next=3;return _call(getSnapshotFromUserAuth,user,additionalDetails);case 3:case\"end\":return _context7.stop();}}},_marked7);}export function onGoogleSignInStart(){return _regeneratorRuntime.wrap(function onGoogleSignInStart$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.next=2;return _takeLatest(USER_ACTION_TYPES.GOOGLE_SIGN_IN_START,signInWithGoogle);case 2:case\"end\":return _context8.stop();}}},_marked8);}export function onCheckUserSession(){return _regeneratorRuntime.wrap(function onCheckUserSession$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_context9.next=2;return _takeLatest(USER_ACTION_TYPES.CHECK_USER_SESSION,isUserAuthenticated);case 2:case\"end\":return _context9.stop();}}},_marked9);}export function onEmailSignInStart(){return _regeneratorRuntime.wrap(function onEmailSignInStart$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:_context10.next=2;return _takeLatest(USER_ACTION_TYPES.EMAIL_SIGN_IN_START,signInWithEmail);case 2:case\"end\":return _context10.stop();}}},_marked10);}export function onSignUpStart(){return _regeneratorRuntime.wrap(function onSignUpStart$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:_context11.next=2;return _takeLatest(USER_ACTION_TYPES.SIGN_UP_START,signUp);case 2:case\"end\":return _context11.stop();}}},_marked11);}export function onSignUpSuccess(){return _regeneratorRuntime.wrap(function onSignUpSuccess$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:_context12.next=2;return _takeLatest(USER_ACTION_TYPES.SIGN_UP_SUCCESS,signInAfterSignUp);case 2:case\"end\":return _context12.stop();}}},_marked12);}export function onSignOutStart(){return _regeneratorRuntime.wrap(function onSignOutStart$(_context13){while(1){switch(_context13.prev=_context13.next){case 0:_context13.next=2;return _takeLatest(USER_ACTION_TYPES.SIGN_OUT_START,signOut);case 2:case\"end\":return _context13.stop();}}},_marked13);}export function userSagas(){return _regeneratorRuntime.wrap(function userSagas$(_context14){while(1){switch(_context14.prev=_context14.next){case 0:_context14.next=2;return _all([_call(onCheckUserSession),_call(onGoogleSignInStart),_call(onEmailSignInStart),_call(onSignUpStart),_call(onSignUpSuccess),_call(onSignOutStart)]);case 2:case\"end\":return _context14.stop();}}},_marked14);}","map":{"version":3,"sources":["C:/Users/angel/OneDrive/Pictures/Karen Sutton Hair Studio/guillao-clothing-store/src/store/user/user.saga.ts"],"names":["getSnapshotFromUserAuth","signInWithGoogle","signInWithEmail","isUserAuthenticated","signUp","signOut","signInAfterSignUp","onGoogleSignInStart","onCheckUserSession","onEmailSignInStart","onSignUpStart","onSignUpSuccess","onSignOutStart","userSagas","USER_ACTION_TYPES","signInSuccess","signInFailed","signUpSuccess","signUpFailed","signOutSuccess","signOutFailed","getCurrentUser","createUserDocumentFromAuth","signInWithGooglePopup","signInAuthUserWithEmailAndPassword","createAuthUserWithEmailAndPassword","signOutUser","userAuth","additionalDetails","call","userSnapshot","put","id","data","user","payload","email","password","userCredential","displayName","takeLatest","GOOGLE_SIGN_IN_START","CHECK_USER_SESSION","EMAIL_SIGN_IN_START","SIGN_UP_START","SIGN_UP_SUCCESS","SIGN_OUT_START","all"],"mappings":"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","sourcesContent":["import { takeLatest, put, all, call } from 'typed-redux-saga/macro';\nimport { User } from 'firebase/auth';\n\nimport { USER_ACTION_TYPES } from './user.types';\n\nimport {\n  signInSuccess,\n  signInFailed,\n  signUpSuccess,\n  signUpFailed,\n  signOutSuccess,\n  signOutFailed,\n  EmailSignInStart,\n  SignUpStart,\n  SignUpSuccess,\n} from './user.action';\n\nimport {\n  getCurrentUser,\n  createUserDocumentFromAuth,\n  signInWithGooglePopup,\n  signInAuthUserWithEmailAndPassword,\n  createAuthUserWithEmailAndPassword,\n  signOutUser,\n  AdditionalInformation,\n} from '../../utils/firebase/firebase.utils';\n\nexport function* getSnapshotFromUserAuth(\n  userAuth: User,\n  additionalDetails?: AdditionalInformation\n) {\n  try {\n    const userSnapshot = yield* call(\n      createUserDocumentFromAuth,\n      userAuth,\n      additionalDetails\n    );\n\n    if (userSnapshot) {\n      yield* put(\n        signInSuccess({ id: userSnapshot.id, ...userSnapshot.data() })\n      );\n    }\n  } catch (error) {\n    yield* put(signInFailed(error as Error));\n  }\n}\n\nexport function* signInWithGoogle() {\n  try {\n    const { user } = yield* call(signInWithGooglePopup);\n    yield* call(getSnapshotFromUserAuth, user);\n  } catch (error) {\n    yield* put(signInFailed(error as Error));\n  }\n}\n\nexport function* signInWithEmail({\n  payload: { email, password },\n}: EmailSignInStart) {\n  try {\n    const userCredential = yield* call(\n      signInAuthUserWithEmailAndPassword,\n      email,\n      password\n    );\n\n    if (userCredential) {\n      const { user } = userCredential;\n      yield* call(getSnapshotFromUserAuth, user);\n    }\n  } catch (error) {\n    yield* put(signInFailed(error as Error));\n  }\n}\n\nexport function* isUserAuthenticated() {\n  try {\n    const userAuth = yield* call(getCurrentUser);\n    if (!userAuth) return;\n    yield* call(getSnapshotFromUserAuth, userAuth);\n  } catch (error) {\n    yield* put(signInFailed(error as Error));\n  }\n}\n\nexport function* signUp({\n  payload: { email, password, displayName },\n}: SignUpStart) {\n  try {\n    const userCredential = yield* call(\n      createAuthUserWithEmailAndPassword,\n      email,\n      password\n    );\n\n    if (userCredential) {\n      const { user } = userCredential;\n      yield* put(signUpSuccess(user, { displayName }));\n    }\n  } catch (error) {\n    yield* put(signUpFailed(error as Error));\n  }\n}\n\nexport function* signOut() {\n  try {\n    yield* call(signOutUser);\n    yield* put(signOutSuccess());\n  } catch (error) {\n    yield* put(signOutFailed(error as Error));\n  }\n}\n\nexport function* signInAfterSignUp({\n  payload: { user, additionalDetails },\n}: SignUpSuccess) {\n  yield* call(getSnapshotFromUserAuth, user, additionalDetails);\n}\n\nexport function* onGoogleSignInStart() {\n  yield* takeLatest(USER_ACTION_TYPES.GOOGLE_SIGN_IN_START, signInWithGoogle);\n}\n\nexport function* onCheckUserSession() {\n  yield* takeLatest(USER_ACTION_TYPES.CHECK_USER_SESSION, isUserAuthenticated);\n}\n\nexport function* onEmailSignInStart() {\n  yield* takeLatest(USER_ACTION_TYPES.EMAIL_SIGN_IN_START, signInWithEmail);\n}\n\nexport function* onSignUpStart() {\n  yield* takeLatest(USER_ACTION_TYPES.SIGN_UP_START, signUp);\n}\n\nexport function* onSignUpSuccess() {\n  yield* takeLatest(USER_ACTION_TYPES.SIGN_UP_SUCCESS, signInAfterSignUp);\n}\n\nexport function* onSignOutStart() {\n  yield* takeLatest(USER_ACTION_TYPES.SIGN_OUT_START, signOut);\n}\n\nexport function* userSagas() {\n  yield* all([\n    call(onCheckUserSession),\n    call(onGoogleSignInStart),\n    call(onEmailSignInStart),\n    call(onSignUpStart),\n    call(onSignUpSuccess),\n    call(onSignOutStart),\n  ]);\n}\n"]},"metadata":{},"sourceType":"module"}